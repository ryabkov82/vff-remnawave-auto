# üß© Role: remnawave_add_host

–†–æ–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç **Host** –≤ Remnawave Panel –∏ –ø—Ä–∏–≤—è–∑—ã–≤–∞–µ—Ç –µ–≥–æ –∫ —Ä–∞–Ω–µ–µ —Å–æ–∑–¥–∞–Ω–Ω–æ–π –Ω–æ–¥–µ.

---

## üîç –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–†–æ–ª—å –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –Ω–æ–≤–æ–≥–æ Host —á–µ—Ä–µ–∑ API –ø–∞–Ω–µ–ª–∏ Remnawave:
1. –ò—â–µ—Ç –Ω–æ–¥—É –ø–æ –∏–º–µ–Ω–∏ (–∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ä–∞–Ω–µ–µ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–π `remnawave_node_uuid`).
2. –ò—â–µ—Ç inbound –ø–æ UUID –∏–ª–∏ —Ç–µ–≥—É (–Ω–∞–ø—Ä–∏–º–µ—Ä `VLESS TCP REALITY`).
3. –°–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–π Host (`/api/hosts`), –≤—ã–ø–æ–ª–Ω—è—è –≤–∞–ª–∏–¥–∞—Ü–∏—é –∏ –æ—á–∏—Å—Ç–∫—É –ø–æ–ª–µ–π.

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ UUID-–æ–≤, –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –≤ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —à–∞–≥–∞—Ö (`register_node`).

---

## ‚öôÔ∏è –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|-------------|-----------|--------------|
| `remnawave_panel_url` | URL –ø–∞–Ω–µ–ª–∏ | ‚Äî |
| `remnawave_panel_api_token` | Bearer-—Ç–æ–∫–µ–Ω API | ‚Äî |
| `remnawave_panel_api_base` | –ü–æ–ª–Ω—ã–π API URL (`{{ remnawave_panel_url }}/api`) | –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è |
| `rw_node_name` | –ò–º—è –Ω–æ–¥—ã –¥–ª—è –ø—Ä–∏–≤—è–∑–∫–∏ | `{{ inventory_hostname }}` |
| `rw_inbound_tag` | –¢–µ–≥ inbound-–∞ | `VLESS TCP REALITY` |
| `rw_host_fingerprint` | Fingerprint –∫–ª–∏–µ–Ω—Ç–∞ | `chrome` |
| `rw_host_path` / `rw_host_sni` / `rw_host_host` | –°—Ç—Ä–æ–∫–æ–≤—ã–µ –ø–æ–ª—è Host (–º–æ–∂–Ω–æ –ø—É—Å—Ç—ã–µ) | `""` |
| `rw_host_tag` | –°–ª—É–∂–µ–±–Ω—ã–π —Ç–µ–≥ Host (A‚ÄìZ 0‚Äì9 _: ) | `""` |

> –ï—Å–ª–∏ —Ä–∞–Ω–µ–µ –≤—ã–ø–æ–ª–Ω—è–ª–∞—Å—å —Ä–æ–ª—å `remnawave_register_node`, UUID-—ã –±—É–¥—É—Ç –ø–æ–ª—É—á–µ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
> `remnawave_node_uuid`, `remnawave_inbound_uuid`, `remnawave_profile_uuid`.

---

## üß† –ü–æ–≤–µ–¥–µ–Ω–∏–µ

1. –ï—Å–ª–∏ –∑–∞–¥–∞–Ω—ã UUID-—ã ‚Äî —Ä–æ–ª—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∏—Ö –Ω–∞–ø—Ä—è–º—É—é.  
2. –ï—Å–ª–∏ –Ω–µ—Ç ‚Äî –∏—â–µ—Ç –Ω–æ–¥—É –∏ inbound –ø–æ –∏–º–µ–Ω–∏/—Ç–µ–≥—É.  
3. –§–æ—Ä–º–∏—Ä—É–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π JSON-payload, –∑–∞–º–µ–Ω—è—è `null` –Ω–∞ –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏.  
4. –°–∞–Ω–∏—Ç–∏–∑–∏—Ä—É–µ—Ç —Ç–µ–≥ (`tag`) –ø–æ–¥ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è API.  
5. –î–µ–ª–∞–µ—Ç `POST /api/hosts`.  
6. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—Ç–∞—Ç—É—Å 201 –∏ –≤—ã–≤–æ–¥–∏—Ç UUID —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ Host.

---

## üöÄ –ü—Ä–∏–º–µ—Ä –≤—ã–∑–æ–≤–∞

```bash
make nodes LIMIT=de-fra-1 TAGS=register_host
```

–∏–ª–∏ –≤—Ä—É—á–Ω—É—é:

```bash
ansible-playbook -i inventory/hosts.ini playbooks/nodes.yml   --limit de-fra-1 --tags register_host
```

---

## üîß –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –æ—Ç –∏–º–µ–Ω–∏ localhost —Å `delegate_to: localhost`.
- –í —Ä–æ–ª–∏ –≤—Å—Ç—Ä–æ–µ–Ω–∞ –∑–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö.
- –ü–æ–ª—è —Å `null` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–∫–ª—é—á–∞—é—Ç—Å—è –∏–∑ —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞.
- –¢–µ–≥ (`rw_host_tag`) –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—Å—è –≤ –≤–µ—Ä—Ö–Ω–∏–π —Ä–µ–≥–∏—Å—Ç—Ä –∏ –æ—á–∏—â–∞–µ—Ç—Å—è –æ—Ç –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤.

---

## üì§ –í–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ —Ñ–∞–∫—Ç—ã

| –§–∞–∫—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----------|
| `remnawave_host_uuid` | UUID —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ Host |
| `remnawave_node_uuid` | UUID —Å–≤—è–∑–∞–Ω–Ω–æ–π –Ω–æ–¥—ã |
| `remnawave_inbound_uuid` | UUID inbound-–∞ |
