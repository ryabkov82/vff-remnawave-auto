- name: Ensure geo files directory is project dir
  when: remnawave_node_geo_files | length > 0
  ansible.builtin.file:
    path: "{{ remnawave_node_dir }}"
    state: directory
    owner: "{{ remnawave_node_owner }}"
    group: "{{ remnawave_node_group }}"
    mode: "{{ remnawave_node_mode }}"

- name: Copy geo files (mounted one-by-one as per docs)
  when: remnawave_node_geo_files | length > 0
  loop: "{{ remnawave_node_geo_files }}"
  ansible.builtin.copy:
    src: "{{ item.src }}"
    dest: "{{ remnawave_node_dir }}/{{ item.dest_name | basename }}"
    owner: "{{ remnawave_node_owner }}"
    group: "{{ remnawave_node_group }}"
    mode: "0644"
